<div class="container">
  <div class="row header">
    <div class="col-md-2 offset-md-5 text-center">
      New Conversion
    </div>
  </div>

  <div class="row">
    <!-- Conversion -->

    <div class="col-md-6">
      <div class="row">
        <div class="col-md-12">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">Source</span>
            </div>
            <textarea
              (input)="getOutput()"
              class="form-control"
              aria-label="With textarea"
              [(ngModel)]="conversionDTO.source"
            ></textarea>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <mat-form-field>
            <mat-label>Source Type</mat-label>
            <mat-select
              [(value)]="conversionDTO.sourcetype"
              (selectionChange)="getOutput()"
            >
              <mat-option>None</mat-option>
              <mat-option value="XML">XML</mat-option>
              <mat-option value="JSON">JSON</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="col-md-6">
          <mat-form-field>
            <mat-label>Source Type</mat-label>
            <mat-select
              [(value)]="conversionDTO.outputtype"
              (selectionChange)="getOutput()"
            >
              <mat-option>None</mat-option>
              <mat-option value="XML">XML</mat-option>
              <mat-option value="JSON">JSON</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <div class="row" *ngIf="changesPreset">
        <div class="col-md-6">
          <mat-form-field>
            <mat-label>Source Type</mat-label>
            <mat-select
              [(value)]="presetIndex"
              (selectionChange)="getPreset()"
            >
              <mat-option>None</mat-option>
              <mat-option *ngFor="let changes of changesPreset; let i = index" value="{{i}}">{{changes.changes_name}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <div class="row" *ngIf="isOutput">
        <div class="col-md-12">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">Source</span>
            </div>
            <textarea
              disabled
              class="form-control"
              aria-label="With textarea"
              [(ngModel)]="output"
            ></textarea>
          </div>
        </div>
      </div>

      <button (click)="save()">
        Save
      </button>
    </div>

    <!-- Changes -->

    <div class="col-md-6">
      <div class="row">
        <div class="col-md-12">
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="basic-addon3"
                >Preset Name</span
              >
            </div>
            <input type="text" class="form-control" />
          </div>
        </div>
      </div>

      <div class="row">
        <p class="col-md-12 text-center">
          Original Tag List
        </p>
      </div>

      <div class="row" *ngFor="let tag of original_tag_quantity; let i = index">
        <div class="col-md-12">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">Tag and New Tag</span>
            </div>
            <p class="input-group-text rounded-0 col">
              {{ original_tag[i] }}
            </p>
            <input
              type="text"
              aria-label="Last name"
              class="form-control"
              [(ngModel)]="new_tag[i]"
              (input)="getOutputString()"
            />
            <div class="input-group-append">
              <a class="input-group-text" (click)="removeTag(i)">
                <svg
                  class="bi bi-trash2"
                  width="1em"
                  height="1em"
                  viewBox="0 0 16 16"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    d="M3.18 4l1.528 9.164a1 1 0 00.986.836h4.612a1 1 0 00.986-.836L12.82 4H3.18zm.541 9.329A2 2 0 005.694 15h4.612a2 2 0 001.973-1.671L14 3H2l1.721 10.329z"
                    clip-rule="evenodd"
                  />
                  <path
                    d="M14 3c0 1.105-2.686 2-6 2s-6-.895-6-2 2.686-2 6-2 6 .895 6 2z"
                  />
                  <path
                    fill-rule="evenodd"
                    d="M12.9 3c-.18-.14-.497-.307-.974-.466C10.967 2.214 9.58 2 8 2s-2.968.215-3.926.534c-.477.16-.795.327-.975.466.18.14.498.307.975.466C5.032 3.786 6.42 4 8 4s2.967-.215 3.926-.534c.477-.16.795-.327.975-.466zM8 5c3.314 0 6-.895 6-2s-2.686-2-6-2-6 .895-6 2 2.686 2 6 2z"
                    clip-rule="evenodd"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <p class="col-md-12 text-center pt-3">
          Removed Tag List
        </p>
      </div>

      <div class="row" *ngFor="let tag of removed_tag_quantity; let i = index">
        <div class="col-md-12">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">Removed Tag</span>
            </div>
            <p class="input-group-text rounded-0 col">
              {{ removed_tag[i] }}
            </p>
            <div class="input-group-append">
              <a class="input-group-text" (click)="replaceTag(i)">
                <svg
                  class="bi bi-arrow-counterclockwise"
                  width="1em"
                  height="1em"
                  viewBox="0 0 16 16"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    d="M12.83 6.706a5 5 0 00-7.103-3.16.5.5 0 11-.454-.892A6 6 0 112.545 5.5a.5.5 0 11.91.417 5 5 0 109.375.789z"
                    clip-rule="evenodd"
                  />
                  <path
                    fill-rule="evenodd"
                    d="M7.854.146a.5.5 0 00-.708 0l-2.5 2.5a.5.5 0 000 .708l2.5 2.5a.5.5 0 10.708-.708L5.707 3 7.854.854a.5.5 0 000-.708z"
                    clip-rule="evenodd"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
